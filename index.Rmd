---
title: "SQL"
output: html_document
---

##Filtering Rows and Colomns

With SQL you can filter colomns with SELECT and rows with WHERE. Let's look at an example using the Lahman baseball database. First we need to load some packages. 

```{r warning=FALSE, message=FALSE}
library(Lahman)
library(sqldf)

```
Suppose we want to see the homerun totals for the 1927 Yabkees. We could write the following.
```{r}
query<-"SELECT playerID, yearID, teamID, HR FROM Batting
WHERE teamID='NYA' and yearID=1927"
sqldf(query)

```

Moving on we can query out which NY Yankees players hit 40 or more homeruns with the following code:

```{r}
query<-"SELECT playerID,teamID,yearID,HR FROM Batting 
WHERE teamID='NYA' and HR>=40"
sqldf(query)

```
Adding the Strike Outs into the query we can further filter out which players hit over 40 homeruns AND had less than 60 strike outs with the following:
```{r}
query<-"SELECT playerID,teamID,yearID,SO,HR FROM Batting 
WHERE HR>=40 and SO<=60"
sqldf(query)

```
Finally we're filtering all the teams to just the Phillies, query the years in the 1970's (using a range), and finally extract the players with more than 30 homeruns.
```{r}
query<-"SELECT playerID,teamID,yearID,SO,HR FROM Batting 
WHERE yearID>1970 and yearID<1980 and  teamID='PHI' and HR>30"
sqldf(query)

```

##Ordering Data Output

With SQL you can also arrange the data by a certain order.By using the code order by, we are arranging the data based on HR in decending order 
```{r}
query<-"SELECT playerID,teamID,yearID,HR FROM Batting
WHERE HR>50
ORDER BY HR DESC"
sqldf(query)

```
Here is another example of arranging the data by order:

```{r}
query<-"SELECT playerID,teamID,yearID,SO,AB FROM Batting
WHERE SO<10 and AB>=400
order by SO"
sqldf(query)

```

##Aggregation

##Joins
